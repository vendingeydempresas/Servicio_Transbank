const express = require('express');const pagos = require('./pagos.json');const { createTransaction } = require('./transbank');const app = express();const PORT = 3000;app.get('/pago', async (req, res) => {  const id = req.query.id;  if (!id || !pagos[id]) {    return res.status(404).send('Pago no encontrado');  }  const { buyOrder, sessionId, amount } = pagos[id];  const returnUrl = `http://localhost:${PORT}/retorno?id=${id}`; // O el dominio de producción  try {    const { url, token } = await createTransaction({      buyOrder,      sessionId,      amount,      returnUrl    });    // Muestra formulario automático para redirigir a Webpay    res.send(`      <html>        <body onload="document.forms[0].submit()">          <form action="${url}" method="POST">            <input type="hidden" name="token_ws" value="${token}" />          </form>        </body>      </html>    `);  } catch (error) {    console.error('Error creando transacción:', error);    res.status(500).send('Error en el servidor');  }});app.get('/retorno', (req, res) => {  res.send("¡Transacción finalizada! Aquí puedes mostrar resultado final.");});app.listen(PORT, () => {  console.log(`Servidor escuchando en http://localhost:${PORT}`);});